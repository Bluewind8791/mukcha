<!DOCTYPE html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/layout}">

<head>
    <script th:inline="javascript">
        // 모달 창 js
        window.onload = function () {
            function onClick() {
                document.querySelector('.modal_wrap').style.display = 'block';
                document.querySelector('.black_bg').style.display = 'block';
            }
            function offClick() {
                document.querySelector('.modal_wrap').style.display = 'none';
                document.querySelector('.black_bg').style.display = 'none';
            }
            document.getElementById('modal_btn').addEventListener('click', onClick);
            document.querySelector('.modal_close').addEventListener('click', offClick);
        };

        // 회원 정보 수정 성공 alert
        var message = [[${ resultMessage }]];
        if (message == "success") {
            alert("회원 정보 수정이 완료되었습니다.");
        }
    </script>

    <link rel="stylesheet" href="/css/userPage.css">
</head>


<div layout:fragment="content">

    <div class="container-fluid p-5 mt-5 text-center">

        <form class="form-signin" th:action="@{/user/delete}" method="POST" th:object="${form}" modelAttribute="form">

            <h3 class="mb-5">회원 탈퇴</h3>

            <div>
                <p>탈퇴 후 동일한 아이디(이메일)로 가입하실 수 없으며,<br>
                    회원님께서 작성하신 평가와 코멘트는 복구할 수 없습니다.</p><br>
            </div>

            <div class="mb-5">
                <h5><strong>정말로 탈퇴 하시겠습니까?</strong></h5>
            </div>

            <div class="mb-3">
                <button class="w-100 btn btn-lg btn-danger" type="button" id="modal_btn">회원 탈퇴</button>

                <!-- 반 검정 배경 -->
                <div class="black_bg"></div>

                <!-- 회원 탈퇴 모달 창 -->
                <div class="modal_wrap">
                    <div class="modal_close"><a href="#">close</a></div>
                    <p>본인 확인을 위하여 비밀번호를 입력해 주세요.</p>
                    <!-- password -->
                    <div class="mb-3 was-validated">
                        <label for="password">비밀번호</label>
                        <input type="password" class="form-control" id="password" name="password" placeholder="****"
                            required>
                        <span style="color:tomato" th:text="${valid_password}"></span>
                    </div>
                    <!-- Password confirm -->
                    <div class="mb-3 was-validated">
                        <label for="rePassword">비밀번호 (확인)</label>
                        <input type="password" class="form-control" id="rePassword" name="rePassword"
                            placeholder="****" required>
                        <span style="color:tomato" th:text="${valid_rePassword}"></span>
                    </div>
                    <p>위의 사항을 확인하였으며, 회원을 탈퇴합니다.</p>
                    <button class="w-100 btn btn-lg btn-danger" type="submit">회원 탈퇴</button>
                </div>
            </div>

            <div class="mb-3">
                <a type="button" class="w-100 btn btn-lg btn-secondary" onclick="window.history.back();">취소</a>
            </div>

        </form>

    </div> <!-- /container -->

</div>

</html>