# 먹챠

이 집은 이건 맛있는데 저건 맛이 별로야...

그런데 왜 메뉴별로 평가할 수 없는거지?

이제 좀 더 자세하게 평가하고 기록하고 싶다!

메뉴별로 평가하여 기록하는 서비스 <먹챠>

## 서비스 구현 목표

- Spring Boot 및 JPA 기술 사용하여 back-end 위주의 웹 페이지 개발.
- front-end 부분은 BootStrap 5 및 thymeleaf 기술을 사용하여 간단하게 개발.
- 회원 기능 : 로그인, 회원 가입 및 회원 정보 수정 기능.
- Spring Security 기술을 통한 보안화.
- OAuth 를 통한 회원가입 및 로그인 기능. (Kakao 계정)

- 메뉴 검색 기능
- 메뉴에 대하여 평가(5점 만점), 코멘트, 먹고싶어요 기능
- 다른 회원이 적은 코멘트에 좋아요 기능
- 메뉴 정보를 크롤링으로 긁어와서 DB에 저장할 수 있는 기능
  - 메뉴 이름
  - 메뉴 사진


### 사용 기술
- Spring Boot
- Spring Security
- JPA
- Bootstrap 5
- Thymeleaf

---

## 시나리오

- 모든 방문자는 검색 및 방문만 가능하다.

### 회원가입

- 이메일(username) (필수항목)
- 비밀번호 (필수항목)
- 닉네임은 (필수항목)
- 생년월일, 성별은 선택항목. (이후의 메뉴 추천을 위한 데이터 수집 용도)

### 회원

- /user/**
- 원하는 메뉴에 별점을 매기고 코멘트를 달 수 있다.

(구현예정)
- 본인이 평가한 모든 메뉴만 골라서 조회할 수 있다.
  - default : 최근 순 정렬
  - 추가 : 평점 기준 정렬, 오래된 순 정렬

### 관리자

- /admin/**
- 모든 회사, 음식(메뉴)를 볼 수 있다
- 모든 회사, 음식(메뉴)를 추가/수정할 수 있다.
- 메뉴 및 리뷰 삭제는 해당 메뉴에 연결된 회사를 삭제한다.

---

## 도메인 기능 리스트

### User

- 사용자를 생성 한다.
- 이메일과 이름은 중복될 수 없다.
- 이메일을 제외한 이름, 패스워드, 기타 정보를 수정할 수 있다.
- 닉네임을 통하여 검색할 수 있다.
- email로 검색할 수 있다.

### Food

- 음식을 생성한다.
- 음식 이름, 회사, 이미지URL, 카테고리를 수정한다.
- 회사 목록을 가져온다
- 회사별 음식 목록을 가져온다
- 카테고리를 가져온다
- 카테고리 별 음식을 가져온다

### Company

* 회사를 생성한다
* 회사의 음식/메뉴들을 추가한다.
* 회사의 음식/메뉴는 중복하여 들어가지 않는다.
* 회사의 이름, 이미지URL를 수정한다.
* 회사의 음식을 삭제한다.

### Review

* 리뷰를 생성한다.
* 점수를 매기지 않고 먹은날짜 설정과 코멘트를 달 수 없다.
* 리뷰의 점수, 코멘트, 먹은날짜를 수정한다.
* 점수를 삭제하면 리뷰가 삭제된다.

---

## Entity Relationship

한 유저는 여러 리뷰를 쓸 수 있으며, 그 리뷰는 한 유저로부터만 쓰일 수 있다. -> 다대일 일대다 관계

### user -> review

- OneToMany - 한 유저는 여러개의 리뷰를 쓸 수 있다.
- 유저의 리뷰는 존재하지 않을 수 있다.
- 리뷰 보기를 눌러야 모든 리뷰가 뜬다. (lazy)

### review -> user

- ManyToOne
- 연관관계 주인
- 리뷰에서는 user는 반드시 존재한다. (nullable = false)
- 리뷰를 클릭하면 user.nickname과 user.profile_image가 뜬다.


한 음식에는 여러가지 리뷰가 달릴 수 있다. 하지만 리뷰의 한개의 컬럼은 한개의 음식 컬럼에만 매핑된다. -> 다대일 일대다 관계

### food -> review

- OneToMany - 한 메뉴는 여러개의 리뷰가 달릴 수 있다.
- 리뷰는 존재하지 않을 수 있다
- 한 음식을 누르면 여러개의 review.score 과 review.comment 가 표시된다.

### review -> food

- ManyToOne
- 연관관계 주인
- 리뷰를 누르면 food.name과 food.image가 뜬다.
- 리뷰에서는 food가 반드시 존재한다 (nullable = false)


한 회사에는 여러 음식이 존재하며, 한 음식에는 한 회사만이 존재할 수 있다. -> 일대다 다대일 관계

### company -> food

- OneToMany - 한 회사에는 여러 메뉴가 존재한다.
- 한 회사에는 메뉴가 존재하지 않을 수 있다.
- 회사를 누르면 그 회사의 제품 리스트가 나온다.

### food -> company

- ManyToOne
- 연관관계 주인
- 여러개의 메뉴는 한 회사에 존재한다.
- 모든 메뉴에는 회사의 정보가 반드시 존재한다. (nullable = false)
- 메뉴를 누르면 company.name 이 뜬다